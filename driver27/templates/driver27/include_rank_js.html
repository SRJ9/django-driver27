<script type="text/javascript">

    function reload_standing(el) {
        var standing_model = $(el).data('standingModel');

        var params = {
            'competition': "{{ competition.pk }}",
            'year': "{{ season.year }}",
            'model': standing_model
        };

        {% if olympic == True %}
            params.olympic = 1;
        {% endif %}

        punctuation = $('#scoring').val();
        if (punctuation) {
            params.punctuation = punctuation;
        }

        by_season = $('#by_season').is(':checked');
        if (by_season) {
            params.by_season = 1;
        }

        $.get("{% url 'driver27:dr27-ajax:standing' %}", params,
            function (response) {
                $(el).html(response);
            }
        );
    }

    function reload_all_standings() {
        $('.standing[data-standing-model]').each(function (index, el) {
            reload_standing(el);
        })
    }

    $(function () {
        reload_all_standings();

        $('#scoring, #by_season').change(function () {
            reload_all_standings();
        })
    });

</script>